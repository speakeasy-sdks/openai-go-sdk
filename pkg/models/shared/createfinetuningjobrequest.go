// Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.

package shared

import (
	"encoding/json"
	"errors"
	"fmt"
	"github.com/speakeasy-sdks/openai-go-sdk/v2/pkg/utils"
)

// CreateFineTuningJobRequestHyperparametersNEpochs1 - The number of epochs to train the model for. An epoch refers to one
// full cycle through the training dataset.
type CreateFineTuningJobRequestHyperparametersNEpochs1 string

const (
	CreateFineTuningJobRequestHyperparametersNEpochs1Auto CreateFineTuningJobRequestHyperparametersNEpochs1 = "auto"
)

func (e CreateFineTuningJobRequestHyperparametersNEpochs1) ToPointer() *CreateFineTuningJobRequestHyperparametersNEpochs1 {
	return &e
}

func (e *CreateFineTuningJobRequestHyperparametersNEpochs1) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "auto":
		*e = CreateFineTuningJobRequestHyperparametersNEpochs1(v)
		return nil
	default:
		return fmt.Errorf("invalid value for CreateFineTuningJobRequestHyperparametersNEpochs1: %v", v)
	}
}

type CreateFineTuningJobRequestHyperparametersNEpochsType string

const (
	CreateFineTuningJobRequestHyperparametersNEpochsTypeCreateFineTuningJobRequestHyperparametersNEpochs1 CreateFineTuningJobRequestHyperparametersNEpochsType = "CreateFineTuningJobRequest_hyperparameters_n_epochs_1"
	CreateFineTuningJobRequestHyperparametersNEpochsTypeInteger                                           CreateFineTuningJobRequestHyperparametersNEpochsType = "integer"
)

type CreateFineTuningJobRequestHyperparametersNEpochs struct {
	CreateFineTuningJobRequestHyperparametersNEpochs1 *CreateFineTuningJobRequestHyperparametersNEpochs1
	Integer                                           *int64

	Type CreateFineTuningJobRequestHyperparametersNEpochsType
}

func CreateCreateFineTuningJobRequestHyperparametersNEpochsCreateFineTuningJobRequestHyperparametersNEpochs1(createFineTuningJobRequestHyperparametersNEpochs1 CreateFineTuningJobRequestHyperparametersNEpochs1) CreateFineTuningJobRequestHyperparametersNEpochs {
	typ := CreateFineTuningJobRequestHyperparametersNEpochsTypeCreateFineTuningJobRequestHyperparametersNEpochs1

	return CreateFineTuningJobRequestHyperparametersNEpochs{
		CreateFineTuningJobRequestHyperparametersNEpochs1: &createFineTuningJobRequestHyperparametersNEpochs1,
		Type: typ,
	}
}

func CreateCreateFineTuningJobRequestHyperparametersNEpochsInteger(integer int64) CreateFineTuningJobRequestHyperparametersNEpochs {
	typ := CreateFineTuningJobRequestHyperparametersNEpochsTypeInteger

	return CreateFineTuningJobRequestHyperparametersNEpochs{
		Integer: &integer,
		Type:    typ,
	}
}

func (u *CreateFineTuningJobRequestHyperparametersNEpochs) UnmarshalJSON(data []byte) error {

	createFineTuningJobRequestHyperparametersNEpochs1 := new(CreateFineTuningJobRequestHyperparametersNEpochs1)
	if err := utils.UnmarshalJSON(data, &createFineTuningJobRequestHyperparametersNEpochs1, "", true, true); err == nil {
		u.CreateFineTuningJobRequestHyperparametersNEpochs1 = createFineTuningJobRequestHyperparametersNEpochs1
		u.Type = CreateFineTuningJobRequestHyperparametersNEpochsTypeCreateFineTuningJobRequestHyperparametersNEpochs1
		return nil
	}

	integer := new(int64)
	if err := utils.UnmarshalJSON(data, &integer, "", true, true); err == nil {
		u.Integer = integer
		u.Type = CreateFineTuningJobRequestHyperparametersNEpochsTypeInteger
		return nil
	}

	return errors.New("could not unmarshal into supported union types")
}

func (u CreateFineTuningJobRequestHyperparametersNEpochs) MarshalJSON() ([]byte, error) {
	if u.CreateFineTuningJobRequestHyperparametersNEpochs1 != nil {
		return utils.MarshalJSON(u.CreateFineTuningJobRequestHyperparametersNEpochs1, "", true)
	}

	if u.Integer != nil {
		return utils.MarshalJSON(u.Integer, "", true)
	}

	return nil, errors.New("could not marshal union type: all fields are null")
}

// CreateFineTuningJobRequestHyperparameters - The hyperparameters used for the fine-tuning job.
type CreateFineTuningJobRequestHyperparameters struct {
	// The number of epochs to train the model for. An epoch refers to one
	// full cycle through the training dataset.
	//
	NEpochs *CreateFineTuningJobRequestHyperparametersNEpochs `json:"n_epochs,omitempty"`
}

func (o *CreateFineTuningJobRequestHyperparameters) GetNEpochs() *CreateFineTuningJobRequestHyperparametersNEpochs {
	if o == nil {
		return nil
	}
	return o.NEpochs
}

// CreateFineTuningJobRequestModel2 - The name of the model to fine-tune. You can select one of the
// [supported models](/docs/guides/fine-tuning/what-models-can-be-fine-tuned).
type CreateFineTuningJobRequestModel2 string

const (
	CreateFineTuningJobRequestModel2Babbage002 CreateFineTuningJobRequestModel2 = "babbage-002"
	CreateFineTuningJobRequestModel2Davinci002 CreateFineTuningJobRequestModel2 = "davinci-002"
	CreateFineTuningJobRequestModel2Gpt35Turbo CreateFineTuningJobRequestModel2 = "gpt-3.5-turbo"
)

func (e CreateFineTuningJobRequestModel2) ToPointer() *CreateFineTuningJobRequestModel2 {
	return &e
}

func (e *CreateFineTuningJobRequestModel2) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "babbage-002":
		fallthrough
	case "davinci-002":
		fallthrough
	case "gpt-3.5-turbo":
		*e = CreateFineTuningJobRequestModel2(v)
		return nil
	default:
		return fmt.Errorf("invalid value for CreateFineTuningJobRequestModel2: %v", v)
	}
}

type CreateFineTuningJobRequestModelType string

const (
	CreateFineTuningJobRequestModelTypeStr                              CreateFineTuningJobRequestModelType = "str"
	CreateFineTuningJobRequestModelTypeCreateFineTuningJobRequestModel2 CreateFineTuningJobRequestModelType = "CreateFineTuningJobRequest_model_2"
)

type CreateFineTuningJobRequestModel struct {
	Str                              *string
	CreateFineTuningJobRequestModel2 *CreateFineTuningJobRequestModel2

	Type CreateFineTuningJobRequestModelType
}

func CreateCreateFineTuningJobRequestModelStr(str string) CreateFineTuningJobRequestModel {
	typ := CreateFineTuningJobRequestModelTypeStr

	return CreateFineTuningJobRequestModel{
		Str:  &str,
		Type: typ,
	}
}

func CreateCreateFineTuningJobRequestModelCreateFineTuningJobRequestModel2(createFineTuningJobRequestModel2 CreateFineTuningJobRequestModel2) CreateFineTuningJobRequestModel {
	typ := CreateFineTuningJobRequestModelTypeCreateFineTuningJobRequestModel2

	return CreateFineTuningJobRequestModel{
		CreateFineTuningJobRequestModel2: &createFineTuningJobRequestModel2,
		Type:                             typ,
	}
}

func (u *CreateFineTuningJobRequestModel) UnmarshalJSON(data []byte) error {

	str := new(string)
	if err := utils.UnmarshalJSON(data, &str, "", true, true); err == nil {
		u.Str = str
		u.Type = CreateFineTuningJobRequestModelTypeStr
		return nil
	}

	createFineTuningJobRequestModel2 := new(CreateFineTuningJobRequestModel2)
	if err := utils.UnmarshalJSON(data, &createFineTuningJobRequestModel2, "", true, true); err == nil {
		u.CreateFineTuningJobRequestModel2 = createFineTuningJobRequestModel2
		u.Type = CreateFineTuningJobRequestModelTypeCreateFineTuningJobRequestModel2
		return nil
	}

	return errors.New("could not unmarshal into supported union types")
}

func (u CreateFineTuningJobRequestModel) MarshalJSON() ([]byte, error) {
	if u.Str != nil {
		return utils.MarshalJSON(u.Str, "", true)
	}

	if u.CreateFineTuningJobRequestModel2 != nil {
		return utils.MarshalJSON(u.CreateFineTuningJobRequestModel2, "", true)
	}

	return nil, errors.New("could not marshal union type: all fields are null")
}

type CreateFineTuningJobRequest struct {
	// The hyperparameters used for the fine-tuning job.
	Hyperparameters *CreateFineTuningJobRequestHyperparameters `json:"hyperparameters,omitempty"`
	// The name of the model to fine-tune. You can select one of the
	// [supported models](/docs/guides/fine-tuning/what-models-can-be-fine-tuned).
	//
	Model CreateFineTuningJobRequestModel `json:"model"`
	// A string of up to 18 characters that will be added to your fine-tuned model name.
	//
	// For example, a `suffix` of "custom-model-name" would produce a model name like `ft:gpt-3.5-turbo:openai:custom-model-name:7p4lURel`.
	//
	Suffix *string `default:"null" json:"suffix"`
	// The ID of an uploaded file that contains training data.
	//
	// See [upload file](/docs/api-reference/files/upload) for how to upload a file.
	//
	// Your dataset must be formatted as a JSONL file. Additionally, you must upload your file with the purpose `fine-tune`.
	//
	// See the [fine-tuning guide](/docs/guides/fine-tuning) for more details.
	//
	TrainingFile string `json:"training_file"`
	// The ID of an uploaded file that contains validation data.
	//
	// If you provide this file, the data is used to generate validation
	// metrics periodically during fine-tuning. These metrics can be viewed in
	// the fine-tuning results file.
	// The same data should not be present in both train and validation files.
	//
	// Your dataset must be formatted as a JSONL file. You must upload your file with the purpose `fine-tune`.
	//
	// See the [fine-tuning guide](/docs/guides/fine-tuning) for more details.
	//
	ValidationFile *string `json:"validation_file,omitempty"`
}

func (c CreateFineTuningJobRequest) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(c, "", false)
}

func (c *CreateFineTuningJobRequest) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &c, "", false, false); err != nil {
		return err
	}
	return nil
}

func (o *CreateFineTuningJobRequest) GetHyperparameters() *CreateFineTuningJobRequestHyperparameters {
	if o == nil {
		return nil
	}
	return o.Hyperparameters
}

func (o *CreateFineTuningJobRequest) GetModel() CreateFineTuningJobRequestModel {
	if o == nil {
		return CreateFineTuningJobRequestModel{}
	}
	return o.Model
}

func (o *CreateFineTuningJobRequest) GetSuffix() *string {
	if o == nil {
		return nil
	}
	return o.Suffix
}

func (o *CreateFineTuningJobRequest) GetTrainingFile() string {
	if o == nil {
		return ""
	}
	return o.TrainingFile
}

func (o *CreateFineTuningJobRequest) GetValidationFile() *string {
	if o == nil {
		return nil
	}
	return o.ValidationFile
}
